<!DOCTYPE html>
<html>
<head>
  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <style>
	body{background-color: #f0f4f7 !important;}
	input[type=checkbox]:checked + label.strikethrough{
		text-decoration: line-through;
	}
	.mark {
		cursor: pointer !important;
	}
	.hidden {
		visibility: hidden !important;
	}
	.nodisplay {
		display: none !important;
	}
  </style>
  
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.7.7/dist/semantic.min.css">
    <link rel="stylesheet" type="text/css" href="frap.css">
 <body>
 
 <script src='https://bevacqua.github.io/dragula/dist/dragula.js'></script>
 		<div class="ui raised  text container segment"> 
			<div class="ui stackable four column grid">
				<div class="sixteen wide mobile eight wide tablet two wide computer column">
					<h4 class="ui header">
						<i class="black sitemap link icon"></i>
						<div class="content">
							<a href="#" class="ui black text">ManoPad
							<div class="sub header">organizer</div>
							</a>						
						</div>
					</h4>
				</div>
		</div>		
		</div>
 <div class="ui raised  text container segment">
 <div class="column">

					<div id="todos" class="ui container mobile ">					
							<div id="notask"class="ui placeholder segment">
							
							  <div class="ui icon header">
								<i class="tasks icon"></i>
								<p class="ui text gray">The tasks list is empty. </p>
							  </div>							  
							</div>
							<div id="left-lovehandles" class="container">
							</div>
							<div class="ui divider"></div>
							<div class="ui fluid action input">
								  <input type="text" class="newtask" placeholder="Add new task...">
								  <button class="ui icon button addnewai">
									<i class="add icon"></i>
								  </button>
								</div>					
						</div>
						</div>
					</div>
				</div>
			</div>
						

<div  id="configtask" class="ui modal tiny very light ">
  <div class="header">
    Configure item
  </div>
  <div class="content">
	<div class="ui fluid right action left icon input">
  <i class="clipboard outline icon"></i>  
  <input type="text" placeholder="Enter item title">
  <div class="ui basic floating dropdown button">
    <div class="text">Item Type</div>
    <i class="dropdown icon"></i>
    <div class="menu">
      <div class="item active selected"><i class="calendar check outline icon"></i> Task</div>
      <div class="item"><i class="tasks icon"></i> Multiple tasks</div>
      <div class="item"><i class="bell outline icon"></i> Reminder</div>
      <div class="item"><i class="file alternate outline icon"></i> Note</div>
    </div>
  </div>
</div>

<div class="ui divider"></div>

<div class="ui fluid form">
	<div class="ui left icon fluid input">
        <textarea rows="2" style="margin-top: 0px; margin-bottom: 0px; min-width:280px; overflow:hidden;min-height:40px;" placeholder="Enter item description"></textarea>
        <i class="hashtag icon"></i>
    </div>
</div>

<div class="ui divider"></div>

<div id="actionitems" class="content ui list">
<h4 class="ui sub header" style="margin: 0.5em 0;">Action items</h4>	
</div>
<div class="ui fluid action input">
  <input type="text" class="newtask" placeholder="Add new task...">
  <button class="ui icon button addnewai">
	<i class="add icon"></i>
  </button>
</div>

<div class="ui divider"></div>
<h4 class="ui sub header" style="margin: 0.5em 0;">Estimated item</h4>	
<div class="ui form">
  <div class="two fields">
    <div class="field">
      <label>Start date</label>
      <div class="ui calendar" id="rangestart">
        <div class="ui input left icon">
          <i class="calendar icon"></i>
          <input type="text" placeholder="Start">
        </div>
      </div>
    </div>
    <div class="field">
      <label>End date</label>
      <div class="ui calendar" id="rangeend">
        <div class="ui input left icon">
          <i class="calendar icon"></i>
          <input type="text" placeholder="End">
        </div>
      </div>
    </div>
  </div>

</div>

<div class="ui divider"></div>


<div class="ui floating fluid inversed labeled icon dropdown button">
  <i class="add user icon"></i>
  <span class="text">Assign to a user</span>
  <div class="menu">
    <div class="header">
      People You Might Know
    </div>
    <div class="item">
      <i class="user icon"></i>
      Jenny Hess
    </div>
    <div class="item">
      <i class="user icon"></i>
      Elliot Fu
    </div>
    <div class="item">
      <i class="user icon"></i>
      Stevie Feliciano
    </div>
    <div class="header">
      Your Friends' Friends
    </div>
    <div class="item">
      <i class="user icon"></i>
      Christian
    </div>
    <div class="item">
      <i class="user icon"></i>
      Matt
    </div>
    <div class="item">
      <i class="user icon"></i>
      Justen Kitsune
    </div>
  </div>
</div>

<div class="ui divider"></div>
<div class="ui fluid multiple search selection dropdown">
  <input type="hidden" name="country">
  <i class="dropdown icon"></i>
	<div class="default text">Sharing with</div>
  <div class="menu">
	  <div class="item" data-value="ev"><i class="user friends icon"></i>Everyone</div>
	  <div class="item" data-value="af"><i class="user icon"></i>Justin</div>
	  <div class="item" data-value="ax"><i class="user icon"></i>Alan</div>
  </div>
	</div>
	<div class="ui divider"></div>	
  
  <div class="actions">
    <div class="ui button">Cancel</div>
    <div class="ui button ok">OK</div>
  </div>
</div>
</div>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.7.7/dist/semantic.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
 <script type="text/javascript">
 dragula([document.getElementById('left-lovehandles')], {
  moves: function (el, container, handle) {
    return handle.classList.contains('handle');
  }
});

// *** For existing task items
$('.taskitem').hover(
	function() {$(this).children('.icon').removeClass('hidden');},
	function() {$(this).children('.icon').addClass('hidden');});
var _toDoIndex = 1;

// *** Add new task
$('.addnewai').click(function() {
	let input = $(this).parent().find('input');
	
	if(input.val().length > 3 ) {
		$(this).parent().parent().parent().find('#left-lovehandles').append('<div class="taskitem"><i class="hamburger icon handle link hidden"></i> <i class="right link close icon hidden"></i> <i class="right link edit icon configaction hidden"></i><div class="ui checkbox"><input type="checkbox" name="example" id="todo_'+_toDoIndex+'"><label for="todo_'+_toDoIndex+'" class="strikethrough mark">'+input.val()+'</label></div></div>');
		input.parent().removeClass('error');
		input.val('');
		_toDoIndex++;
	} else {
		input.parent().addClass('error');
		console.log('validation');
	}
	$('.taskitem').hover(
	function() {$(this).children('.icon').removeClass('hidden');},
	function() {$(this).children('.icon').addClass('hidden');});
	
	$('.configaction').click(function(evt) {
		$('#configtask')
		  .modal({inverted: true, closable: false}) 
		  .modal('show')
		;
		
		$('#rangestart').calendar({
		  type: 'date',
		  monthFirst: false,
		  endCalendar: $('#rangeend')
		});
		$('#rangeend').calendar({
		  type: 'date',
		  monthFirst: false,
		  startCalendar: $('#rangestart')
		});
		$('.ok').click(function() {
		$('body')
		  .toast({
			title: 'Success',
			message: 'Item saved successfully',
			position: 'top center',
			showIcon: 'thumbs up outline',
			class: 'success',
			className: {
				toast: 'ui hoverfloating message'
			},
			showProgress: 'bottom'
		  });
		});
		$('.dropdown').dropdown();
	});
});

// *** Add new task by ENTER key
$('.newtask').keypress(function( event ) {
  if ( event.which == 13 ) {
     $(this).parent().find('.addnewai').click();
  }
});






</script>
